<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beast Reader - LottoLook</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/dark.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-dark text-light">
    <div class="container mt-4 mb-5">
        <header class="text-center mb-4">
            <img src="beastreader-logo.png" alt="Beast Reader Logo" style="width: 100px; height: auto; border-radius: 10px; margin-bottom:10px;">
            <h1>Beast Reader (BETA)</h1>
            <p class="lead">East New York - Memory Bank</p>
        </header>

        <!-- Contenedor de Fecha y Selección de Tracks -->
        <div class="row align-items-end mb-3">
            <div class="col-md-4 mb-3 mb-md-0">
                <label for="fecha" class="form-label">Fecha del Sorteo:</label>
                <input type="text" class="form-control bg-secondary text-light" id="fecha" placeholder="Seleccione fecha(s)">
            </div>
            <div class="col-md-8">
                <p class="mb-1" id="selectedDaysCount">Días seleccionados: 0</p>
                <p class="mb-1" id="tracksSelectedCount">Tracks seleccionados: 0</p>
            </div>
        </div>

        <!-- Track Selection Buttons -->
        <div class="tracks-container mb-4">
            <div class="track-category">
                <h5><i class="bi bi-flag-fill"></i> USA Tracks</h5>
                <div class="track-buttons-grid">
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="NYMidDay" autocomplete="off" data-track-name="NY Mid Day" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="NYMidDay"><span class="track-name">NY Mid Day</span> <span class="cutoff-time">(12:20PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="NYEvening" autocomplete="off" data-track-name="NY Evening" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="NYEvening"><span class="track-name">NY Evening</span> <span class="cutoff-time">(07:20PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="NJMidDay" autocomplete="off" data-track-name="NJ Mid Day" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="NJMidDay"><span class="track-name">NJ Mid Day</span> <span class="cutoff-time">(12:57PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="NJEvening" autocomplete="off" data-track-name="NJ Evening" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="NJEvening"><span class="track-name">NJ Evening</span> <span class="cutoff-time">(07:55PM)</span></label>
                    </div>
                     <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="FLMidDay" autocomplete="off" data-track-name="FL Mid Day" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="FLMidDay"><span class="track-name">FL Mid Day</span> <span class="cutoff-time">(01:28PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="FLEvening" autocomplete="off" data-track-name="FL Evening" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="FLEvening"><span class="track-name">FL Evening</span> <span class="cutoff-time">(09:43PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="CTMidDay" autocomplete="off" data-track-name="CT Mid Day" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="CTMidDay"><span class="track-name">CT Mid Day</span> <span class="cutoff-time">(01:28PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="CTEvening" autocomplete="off" data-track-name="CT Evening" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="CTEvening"><span class="track-name">CT Evening</span> <span class="cutoff-time">(10:00PM)</span></label>
                    </div>
                     <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="GeorgiaMidDay" autocomplete="off" data-track-name="Georgia Mid Day" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="GeorgiaMidDay"><span class="track-name">Georgia Mid Day</span> <span class="cutoff-time">(12:29PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="GeorgiaEvening" autocomplete="off" data-track-name="Georgia Evening" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="GeorgiaEvening"><span class="track-name">Georgia Evening</span> <span class="cutoff-time">(06:59PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="GeorgiaNight" autocomplete="off" data-track-name="Georgia Night" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="GeorgiaNight"><span class="track-name">Georgia Night</span> <span class="cutoff-time">(11:34PM)</span></label>
                    </div>

                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="PensilvaniaAM" autocomplete="off" data-track-name="Pensilvania AM" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="PensilvaniaAM"><span class="track-name">Pensilvania AM</span> <span class="cutoff-time">(01:30PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="PensilvaniaPM" autocomplete="off" data-track-name="Pensilvania PM" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="PensilvaniaPM"><span class="track-name">Pensilvania PM</span> <span class="cutoff-time">(06:55PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="Venezuela" autocomplete="off" data-track-name="Venezuela" data-region="USA">
                        <label class="btn btn-outline-primary track-button" for="Venezuela"><span class="track-name">Venezuela</span> <span class="cutoff-time">(No Cutoff)</span></label>
                    </div>
                    <!-- Placeholder for more USA tracks -->
                </div>
            </div>

            <div class="track-category">
                <h5><i class="bi bi-sun-fill"></i> Santo Domingo Tracks</h5>
                <div class="track-buttons-grid">
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="Real" autocomplete="off" data-track-name="Real" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="Real"><span class="track-name">Real</span> <span class="cutoff-time">(12:55PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="Ganamas" autocomplete="off" data-track-name="Gana más" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="Ganamas"><span class="track-name">Gana más</span> <span class="cutoff-time">(02:55PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="Loteka" autocomplete="off" data-track-name="Loteka" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="Loteka"><span class="track-name">Loteka</span> <span class="cutoff-time">(07:55PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="Nacional" autocomplete="off" data-track-name="Nacional" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="Nacional"><span class="track-name">Nacional</span> <span class="cutoff-time">(08:50PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="Leidsa" autocomplete="off" data-track-name="Leidsa Quiniela Pale" data-region="SD"> <!-- Assume this is Leidsa QP -->
                        <label class="btn btn-outline-success track-button" for="Leidsa"><span class="track-name">Leidsa QP</span> <span class="cutoff-time">(08:50PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="PrimeraDia" autocomplete="off" data-track-name="Primera Día" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="PrimeraDia"><span class="track-name">Primera Día</span> <span class="cutoff-time">(11:55AM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="SuerteDia" autocomplete="off" data-track-name="Suerte Día" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="SuerteDia"><span class="track-name">Suerte Día</span> <span class="cutoff-time">(12:25PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="Lotedom" autocomplete="off" data-track-name="Lotedom" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="Lotedom"><span class="track-name">Lotedom</span> <span class="cutoff-time">(01:55PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="PrimeraNoche" autocomplete="off" data-track-name="Primera Noche" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="PrimeraNoche"><span class="track-name">Primera Noche</span> <span class="cutoff-time">(07:55PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="AnguilaManana" autocomplete="off" data-track-name="Anguila Mañana" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="AnguilaManana"><span class="track-name">Anguila Mañana</span> <span class="cutoff-time">(09:00AM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="AnguilaMediodia" autocomplete="off" data-track-name="Anguila Mediodía" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="AnguilaMediodia"><span class="track-name">Anguila Mediodía</span> <span class="cutoff-time">(01:00PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="AnguilaTarde" autocomplete="off" data-track-name="Anguila Tarde" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="AnguilaTarde"><span class="track-name">Anguila Tarde</span> <span class="cutoff-time">(05:00PM)</span></label>
                    </div>
                     <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="AnguilaNoche" autocomplete="off" data-track-name="Anguila Noche" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="AnguilaNoche"><span class="track-name">Anguila Noche</span> <span class="cutoff-time">(09:00PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="KingLotteryTarde" autocomplete="off" data-track-name="King Lottery Tarde" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="KingLotteryTarde"><span class="track-name">King Tarde</span> <span class="cutoff-time">(12:30PM)</span></label>
                    </div>
                    <div class="track-button-container">
                        <input type="checkbox" class="btn-check track-checkbox" id="KingLotteryNoche" autocomplete="off" data-track-name="King Lottery Noche" data-region="SD">
                        <label class="btn btn-outline-success track-button" for="KingLotteryNoche"><span class="track-name">King Noche</span> <span class="cutoff-time">(07:30PM)</span></label>
                    </div>
                    <!-- Placeholder for more SD tracks -->
                </div>
            </div>
        </div>

        <!-- Tabla de Jugadas -->
        <div class="table-responsive mb-3">
            <table class="table table-dark table-striped table-bordered">
                <thead>
                    <tr>
                        <th scope="col" class="col-select"><input type="checkbox" id="selectAllRows" title="Select/Deselect all rows"></th>
                        <th scope="col" class="col-play-number"># Play</th>
                        <th scope="col" class="col-game-mode">Game Mode</th>
                        <th scope="col" class="col-wager">Straight</th>
                        <th scope="col" class="col-wager">Box</th>
                        <th scope="col" class="col-wager">Combo</th>
                        <th scope="col" class="col-notes">Notes</th>
                        <th scope="col" class="col-total text-end">Total</th>
                    </tr>
                </thead>
                <tbody id="tablaJugadas">
                    <!-- Las filas de jugadas se agregarán aquí -->
                </tbody>
            </table>
        </div>

        <!-- Action Buttons Grid -->
        <div class="action-buttons-container mb-4">
          <!-- First Row of Action Buttons -->
          <div class="action-button-row">
            <button type="button" class="btn btn-primary styled-action-button" id="agregarJugada">
              <i class="bi bi-plus-circle"></i> Add Play
            </button>
            <button type="button" class="btn btn-info styled-action-button" id="wizardButton" data-bs-toggle="modal" data-bs-target="#wizardModal">
              <i class="bi bi-magic"></i> Wizard
            </button>
            <button type="button" class="btn btn-danger styled-action-button" id="eliminarJugada">
              <i class="bi bi-dash-circle"></i> Remove Last
            </button>
            <button type="button" class="btn btn-warning styled-action-button" id="resetForm">
              <i class="bi bi-arrow-clockwise"></i> Reset Form
            </button>
          </div>
          <!-- Second Row of Action Buttons -->
          <div class="action-button-row">
            <button type="button" class="btn btn-success styled-action-button" id="generarTicket">
              <i class="bi bi-ticket-detailed-fill"></i> Generate Ticket
            </button>
            <button type="button" class="btn btn-purple styled-action-button" id="btnOcrModal" onclick="abrirModalOCR()">
              <i class="bi bi-camera"></i> OCR Capture
            </button>
            <button type="button" class="btn btn-secondary styled-action-button" id="pasteAmountsButton">
              <i class="bi bi-clipboard-plus"></i> Paste Wagers
            </button>
            <button type="button" class="btn btn-dark styled-action-button" onclick="window.open('dailyReport.html','_blank')">
              <i class="bi bi-file-earmark-text"></i> Daily Report
            </button>
          </div>
        </div>

        <!-- Total Section -->
        <div class="total-section text-center p-3 mb-4 rounded">
            <h2>Total General: <span id="totalGeneral">$0.00</span></h2>
        </div>

    </div><!-- /.container -->

    <!-- Modal OCR -->
    <div class="modal fade" id="modalOcr" tabindex="-1" aria-labelledby="modalOcrLabel" aria-hidden="true" data-bs-theme="dark">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalOcrLabel"><i class="bi bi-camera-fill"></i> Capturar Ticket por OCR</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Sube una imagen de tu ticket de lotería. La IA intentará leer las jugadas.</p>
                    <div id="ocrDropZone" class="ocr-drop-zone mb-3">
                        <p>Arrastra y suelta una imagen aquí, o haz clic para seleccionar.</p>
                        <input type="file" id="ocrFile" accept="image/*" class="form-control" style="display: none;">
                        <img id="ocrPreview" src="#" alt="Vista previa de la imagen" class="img-fluid rounded mt-2" style="display:none; max-height: 300px;"/>
                    </div>
                    <button type="button" class="btn btn-primary w-100 mb-3" id="btnProcesarOCR" onclick="procesarOCR()" disabled><i class="bi bi-cpu"></i> Procesar con IA</button>
                    
                    <div id="ocrLoading" style="display:none;" class="text-center mb-3">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p>Procesando, por favor espera...</p>
                    </div>

                    <div id="ocrError" class="alert alert-danger" style="display:none;"></div>
                    
                    <h5><i class="bi bi-card-list"></i> Jugadas Detectadas:</h5>
                    <div id="ocrDebugInfo" class="mb-2" style="font-size: 0.8em; display:none;">
                        Raw AI Output: <pre id="rawOcrOutput" class="bg-secondary p-2 rounded"></pre>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-secondary mb-2" onclick="toggleOcrDebug()">Mostrar/Ocultar Debug</button>
                    
                    <div id="ocrJugadas" class="list-group">
                        <!-- Jugadas interpretadas se mostrarán aquí -->
                    </div>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle"></i> Cerrar</button>
                    <button type="button" class="btn btn-info" id="btnCargarJugadas" onclick="handleCargarTodasLasJugadasClick()" disabled>
                        <i class="bi bi-arrow-down-square-fill"></i> Cargar Jugadas al Form
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Wizard Modal -->
    <div class="modal fade" id="wizardModal" tabindex="-1" aria-labelledby="wizardModalLabel" aria-hidden="true" data-bs-theme="dark">
        <div class="modal-dialog modal-xl">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="wizardModalLabel"><i class="bi bi-magic"></i> Asistente de Jugadas Múltiples</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!-- Columna de Entrada de Números -->
                        <div class="col-md-4 border-end border-secondary">
                            <h6><i class="bi bi-input-cursor-text"></i> Ingresar Números (uno por línea)</h6>
                            <textarea id="wizardNumbersInput" class="form-control bg-secondary text-light mb-2" rows="10" placeholder="Ej: 123\n4567\n89-01"></textarea>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="wizardPermute">
                                <label class="form-check-label" for="wizardPermute">
                                    <i class="bi bi-shuffle"></i> Permutar dígitos (ej: 123 -> 132, 213, etc.)
                                </label>
                            </div>
                             <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="wizardQuickPick">
                                <label class="form-check-label" for="wizardQuickPick">
                                    <i class="bi bi-dice-3"></i> Quick Pick (ignora números ingresados)
                                </label>
                            </div>
                            <div class="row mb-2">
                                <div class="col">
                                    <label for="wizardNumQuickPicks" class="form-label"># de Quick Picks:</label>
                                    <input type="number" id="wizardNumQuickPicks" class="form-control bg-secondary text-light" value="5" min="1">
                                </div>
                                <div class="col">
                                    <label for="wizardDigitsQuickPick" class="form-label">Dígitos:</label>
                                    <select id="wizardDigitsQuickPick" class="form-select bg-secondary text-light">
                                        <option value="3">3 (Pick 3)</option>
                                        <option value="4">4 (Win 4)</option>
                                        <option value="2">2 (Pulito)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!-- Columna de Montos -->
                        <div class="col-md-4 border-end border-secondary">
                            <h6><i class="bi bi-currency-dollar"></i> Montos por Jugada</h6>
                            <div class="input-group mb-2">
                                <span class="input-group-text">Straight $</span>
                                <input type="number" id="wizardStraightAmount" class="form-control bg-secondary text-light" placeholder="Ej: 1.00" step="0.01">
                                <button class="btn btn-outline-secondary lock-btn" type="button" id="lockStraight" data-target="wizardStraightAmount"><i class="bi bi-unlock"></i></button>
                            </div>
                            <div class="input-group mb-2">
                                <span class="input-group-text">Box $</span>
                                <input type="number" id="wizardBoxAmount" class="form-control bg-secondary text-light" placeholder="Ej: 0.50" step="0.01">
                                 <button class="btn btn-outline-secondary lock-btn" type="button" id="lockBox" data-target="wizardBoxAmount"><i class="bi bi-unlock"></i></button>
                            </div>
                            <div class="input-group mb-3">
                                <span class="input-group-text">Combo $</span>
                                <input type="number" id="wizardComboAmount" class="form-control bg-secondary text-light" placeholder="Ej: 0.25" step="0.01">
                                 <button class="btn btn-outline-secondary lock-btn" type="button" id="lockCombo" data-target="wizardComboAmount"><i class="bi bi-unlock"></i></button>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="wizardRoundDown">
                                <label class="form-check-label" for="wizardRoundDown">
                                    <i class="bi bi-arrow-down-circle"></i> Redondear "Box" y "Combo" a .00 o .50 (ej: .25 -> .00, .75 -> .50)
                                </label>
                            </div>
                        </div>
                        <!-- Columna de Previsualización y Control -->
                        <div class="col-md-4">
                            <h6><i class="bi bi-eye-fill"></i> Previsualización (<span id="wizardPreviewCount">0</span> jugadas)</h6>
                            <div id="wizardPreviewArea" class="wizard-preview-area mb-2 p-2 border rounded bg-secondary">
                                <!-- Jugadas generadas se mostrarán aquí -->
                            </div>
                            <p class="small text-warning" id="wizardLimitWarning" style="display:none;">Límite de jugadas del formulario principal alcanzado. No se agregarán más jugadas.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle"></i> Cancelar</button>
                    <button type="button" class="btn btn-warning" id="wizardPreviewPlays"><i class="bi bi-arrow-repeat"></i> Previsualizar Jugadas</button>
                    <button type="button" class="btn btn-primary" id="wizardAddPlaysToForm"><i class="bi bi-plus-square-dotted"></i> Agregar Jugadas al Formulario</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ticket Preview Modal -->
    <div class="modal fade" id="ticketModal" tabindex="-1" aria-labelledby="ticketModalLabel" aria-hidden="true" data-bs-theme="dark">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="ticketModalLabel"><i class="bi bi-receipt-cutoff"></i> Vista Previa del Ticket</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="ticketContent" class="ticket-preview bg-light text-dark p-3 rounded">
                        <!-- Contenido del ticket generado aquí -->
                    </div>
                    <div class="mt-3 text-center">
                        <div id="qrcodeTicket" class="mx-auto" style="width: 128px; height: 128px;"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle"></i> Cerrar</button>
                    <button type="button" class="btn btn-primary" id="downloadTicket"><i class="bi bi-download"></i> Descargar Ticket (JPG)</button>
                    <button type="button" class="btn btn-info" id="copyTicketLink"><i class="bi bi-link-45deg"></i> Copiar Link (Próximamente)</button>
                     <button type="button" class="btn btn-success" id="saveToSheetDB"><i class="bi bi-cloud-arrow-up-fill"></i> Guardar en Drive (SheetDB)</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tutorial Modal -->
    <div class="modal fade" id="tutorialModal" tabindex="-1" aria-labelledby="tutorialModalLabel" aria-hidden="true" data-bs-theme="dark">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="tutorialModalLabel"><i class="bi bi-info-circle-fill"></i> Manual de Usuario - Beast Reader</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="tutorialContent">
                    <!-- Contenido del tutorial se cargará aquí -->
                </div>
                <div class="modal-footer">
                     <div class="dropdown me-auto">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-translate"></i> Idioma
                        </button>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="languageDropdown">
                            <li><a class="dropdown-item" href="#" onclick="loadTutorial('en')">English</a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadTutorial('es')">Español</a></li>
                            <li><a class="dropdown-item" href="#" onclick="loadTutorial('ht')">Kreyòl Ayisyen</a></li>
                        </ul>
                    </div>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle"></i> Cerrar</button>
                </div>
            </div>
        </div>
    </div>


    <footer class="text-center mt-5 mb-3">
        <p>&copy; <span id="currentYear"></span> LottoLook - Beast Reader. Todos los derechos reservados.</p>
        <p><small>Una herramienta para agilizar tus jugadas. Juega con responsabilidad.</small></p>
        <button id="showTutorial" class="btn btn-sm btn-outline-info"><i class="bi bi-question-circle"></i> Ver Manual de Usuario</button>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/es.js"></script> <!-- Spanish localization for Flatpickr -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/customParseFormat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/utc.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/timezone.js"></script>
    <script src="scripts/qrcode.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="scripts.js"></script>
</body>
</html>